<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>remove</title>
    <link rel="stylesheet" type="text/css" href="/Static/assets/style/common/base.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
</head>
<body>
    <div style="margin-top:10px;text-align:center;position:relative;background:#e8f3ce;">
        <input type="text" class="removeTxt" style="width:200px;height:25px;"/>
    </div>
    <div style="margin-top:10px;text-align:center;position:relative;background:#e8f3ce;">
        <input type="text" class="removeTxt" style="width:200px;height:25px;"/>
    </div>
     <div style="margin-top:10px;text-align:center;position:relative;background:#e8f3ce;">
        <input type="text" class="removeTxt" style="width:200px;height:25px;"/>
    </div>
     <div style="margin-top:10px;text-align:center;position:relative;background:#e8f3ce;">
        <input type="text" class="removeTxt" style="width:200px;height:25px;"/>
    </div>
    <script>
        $(function () {
            $('.removeTxt').bind('mouseenter', function () {
                //创建删除按钮
                if ($('.clearBtn').length == 0) {
                    createElem(this);
                }
            })
            $('.removeTxt').bind('mouseout', function () {
                //移除删除按钮
                $('.clearBtn').live('mouseenter', function () {
                    $(this).addClass('removeMark');
                })
                setTimeout(function () {
                    if (!($('.clearBtn').hasClass('removeMark'))) {
                        $('.clearBtn').remove();
                    }
                },1)
            })
            $('.clearBtn').live('mouseout', function () {
                $(this).removeClass('removeMark');
            })
            //移除相应文本框当中的类容
            $('.clearBtn').live('click', function () {
                $(this).siblings('.removeTxt').val('');
            })
            //窗体大小改变是重置remove元素的位置
            //$(window).resize(function () {
            //    setRemovePosition();
            //})
            //创建remove元素
            function createElem(elem) {
                var removeIcon = '<div class="clearBtn" style="width:14px;height:14px;cursor:pointer;position:absolute;z-index:9999;"><img src="/Static/images/base/icon/removeTxt.png" /></div>'
                $(elem).parent().append(removeIcon);
                setRemovePosition(elem);
            }
            //设置清除元素的位置
            function setRemovePosition(el) {
                var elem = $(el);
                var offset = elem.offset();
                var top = offset.top;
                var left = offset.left;
                var width = elem.outerWidth();
                var height = elem.outerHeight();
                var clearBtn = $('.clearBtn');
                //设置删除按钮的top,clearBtn的宽高均为14px
                var clearBtnTop = top + (height / 2) - 9;
                //设置left,17为learBtn的width+padding+border
                var clearBtnLeft = left + width - 17;
                clearBtn.offset({ left: clearBtnLeft, top: clearBtnTop });
            }
        })
    </script>
</body>
</html>
